{
  "variables" : {
        "VM_NAME" : "packer-ubuntu14.04.4-amd64"
        },
  "builders": [{
     "name": "ubuntu-14.04.4.amd64.vmware",
     "type": "vmware-iso",
     "guest_os_type": "ubuntu-64",
     "iso_url": "ubuntu-14.04.4-server-amd64.iso",
     "iso_checksum": "2ac1f3e0de626e54d05065d6f549fa3a",
     "iso_checksum_type": "md5",
     "ssh_username": "hcoeuser",
     "ssh_password": "hcoeuser",
     "ssh_port": 22,
     "ssh_timeout": "30m",
     "http_directory": "http",
     "headless": "false",
     "boot_wait": "5s",
     "boot_command": [
        "<esc><wait>",
        "<esc><wait>",
        "<enter><wait>",
        "/install/vmlinuz<wait>",
        " auto<wait>",
        " console-setup/ask_detect=false<wait>",
        " console-setup/layoutcode=us<wait>",
        " console-setup/modelcode=pc105<wait>",
        " debian-installer=en_US<wait>",
        " fb=false<wait>",
        " initrd=/install/initrd.gz<wait>",
        " kbd-chooser/method=us<wait>",
        " keyboard-configuration/layout=USA<wait>",
        " keyboard-configuration/variant=USA<wait>",
        " locale=en_US<wait>",
        " netcfg/get_hostname=localhost<wait>",
        " netcfg/get_domain=hpe.com<wait>",
        " noapic<wait>",
        " preseed/url=http://{{ .HTTPIP }}:{{ .HTTPPort }}/preseed.cfg<wait>",
        " -- <wait>",
        "<enter><wait>"
    ],
     "vm_name" : "{{user `VM_NAME`}}",
     "disk_size": "102400",
     "disk_type_id": "thin",
     "remote_host": "ftcvhfesx01h.ftc.hpeswlab.net",
     "remote_datastore": "p02_hfprod_L00",
     "remote_username": "bfftcesxusr",
     "remote_password": "happy.new.year-2016",
     "remote_type": "esx5",
     "shutdown_command": "echo 'hcoeuser'|sudo -S shutdown -P now",
     "format": "ova",
     "tools_upload_flavor": "linux",
     "vmx_data": {
        "config.version": 8,
        "virtualHW.version": 8,
        "ethernet0.networkName": "VM Network",
        "ethernet0.virtualDev": "e1000",
        "memsize": "16384",
        "numvcpus": "4",
        "cpuid.coresPerSocket": "1",
        "ide0:0.fileName": "disk.vmdk",
        "ide0:0.present": "TRUE",
        "ide0:0.redo": "",
        "scsi0:0.present": "FALSE",
        "RemoteDisplay.vnc.enabled": "TRUE",
        "RemoteDisplay.vnc.port":  "5900"
     }
    }],
    "provisioners": [
     { "type": "file", "source": "scripts/firstboot.sh", "destination": "/tmp/firstboot.sh"},
     { "type": "shell",
     "execute_command": "echo 'hcoeuser'|sudo -S sh '{{.Path}}'",
     "scripts": [
       "scripts/base.sh",
       "scripts/postinstall.sh"
    ]}
    ]
    }
}